# 广告系统核心概念：Yield Optimization (收益优化) 与初筛层

这是一个非常关键的概念区分，它阐明了广告系统中两个重要环节的分工：**谁负责过滤，谁负责赚钱**。

## 核心结论

**广告初筛层（Pre-filtering）本身不执行 Yield Optimization（收益优化）算法。**

这两者在广告系统中扮演着目标相反、前后协作的角色：

*   **初筛层 (门卫):** 目标是**效率和正确性**。它的任务是快速、严格地将**不符合资格**的广告全部拦在门外。它只关心“能不能投”，不关心“赚多少钱”。
*   **Yield Optimization (拍卖师):** 目标是**平台收益最大化**。它的任务是从所有**有资格**的候选广告中，选出那个能让平台（媒体方）**赚最多钱**的广告。它只关心“谁最值钱”。

---

## Yield Optimization 算法在何处工作？

Yield Optimization 发生在广告流程的**后端**，通常是在**精排之后、最终决定广告胜出者的“拍卖”(Auction)环节**。

其工作流程如下：

1.  **形成高质量候选池：**
    广告请求经过了**初筛**（过滤无效广告）、**召回**（匹配相关广告）、**排序**（预测效果好坏）之后，系统会得到一个最终的高质量候选广告列表（例如，Top 20）。这些广告都是有资格且有潜力赢得此次展示的。

2.  **统一竞价标准：计算 eCPM**
    候选广告的出价方式多种多样（CPC, CPM, CPA 等）。为了公平比较，系统必须将它们统一换算成一个标准“货币”—— **eCPM (effective Cost Per Mille，有效的千次展示预估收入)**。

    Yield Optimization 算法的核心就是为每个候选广告计算其 eCPM 值：
    *   **对于 CPM 广告:** `eCPM = CPM 出价`
    *   **对于 CPC 广告:** `eCPM = pCTR (预估点击率) × CPC 出价 × 1000`
    *   **对于 oCPC/CPA 广告:** `eCPM = pCTR (预估点击率) × pCVR (预估转化率) × CPA 目标出价 × 1000`

3.  **拍卖与选择 (Auction & Selection)**
    *   **基本逻辑 (一价/二价拍卖):** 算法会从所有候选者中，选择 **eCPM 最高** 的那个广告来赢得本次展示机会。因为最高的 eCPM 意味着这次展示能为平台带来最大的期望收入。
    *   **高级策略 (动态底价):** 更高级的 Yield Optimization 算法还会为本次展示设置一个动态的“底价”(Floor Price)。如果计算出的最高 eCPM 仍然低于这个底价，平台可能会认为“将这次宝贵的展示机会贱卖了不划算”，从而决定**不展示任何广告**，以保护长期收益。这个底价会根据用户价值、竞争激烈程度等因素实时调整。

---

## 总结与比喻

*   **初筛层** 如同机场的 **安检员**。他只负责检查你的护照、签证是否有效（定向是否匹配），不关心你是要去经济舱还是头等舱。
*   **Yield Optimization 算法** 如同航空公司的 **票务系统**。在所有通过安检的旅客中，它要决定最后一个空座位是卖给出价最高的商务人士，还是留给自己的金卡会员，以实现航空公司整体收益的最大化。

**一句话总结：初筛层负责“过滤无效供给”，而 Yield Optimization 负责在有效供给中“选择最优供给”。**
